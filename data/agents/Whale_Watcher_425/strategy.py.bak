```python
import numpy as np
import pandas as pd

class Whale_Watcher_425:
    """
    Agent: Whale_Watcher_425 (Evolved)
    Strategy: Volume-Weighted Trend Following with Dynamic Volatility Risk Control
    Status: Evolved for Survival and Recovery
    """

    def __init__(self):
        # ----------------------------------------------------------------
        # ðŸ§¬ åŸºå› å˜å¼‚å‚æ•° (Evolutionary Parameters)
        # ----------------------------------------------------------------
        self.params = {
            'ema_fast': 12,           # å¿«é€Ÿè¶‹åŠ¿çº¿
            'ema_slow': 26,           # æ…¢é€Ÿè¶‹åŠ¿çº¿
            'vol_ma_window': 20,      # æˆäº¤é‡åŸºå‡†å‘¨æœŸ
            'whale_factor': 1.8,      # å·¨é²¸ä¾¦æµ‹å€æ•° (å½“å‰é‡ > 1.8å€å‡é‡)
            'rsi_period': 14,         # åŠ¨é‡å‘¨æœŸ
            'rsi_overbought': 70,     # è¶…ä¹°é˜ˆå€¼
            'rsi_oversold': 30,       # è¶…å–é˜ˆå€¼
            'atr_period': 14,         # æ³¢åŠ¨çŽ‡å‘¨æœŸ
            'risk_per_trade': 0.02,   # æ¯æ¬¡äº¤æ˜“ä»…é€šè¿‡ 2% èµ„é‡‘é£Žé™©
            'sl_atr_mult': 2.0,       # æ­¢æŸ = 2 * ATR
            'tp_atr_mult': 3.5,       # æ­¢ç›ˆ = 3.5 * ATR (ç›ˆäºæ¯”ä¼˜åŒ–)
        }
        
        # äº¤æ˜“çŠ¶æ€ç®¡ç†
        self.position = None      # å½“å‰æŒä»“: None, 'long', 'short'
        self.entry_price = 0.0
        self.stop_loss = 0.0
        self.take_profit = 0.0
        self.equity = 536.69      # å½“å‰è´¦æˆ·ä½™é¢

    def calculate_indicators(self, df: pd.DataFrame) -> pd.DataFrame:
        """
        è®¡ç®—æŠ€æœ¯æŒ‡æ ‡ï¼Œç”¨äºŽæ„ŸçŸ¥å¸‚åœºçŽ¯å¢ƒ
        """
        # 1. è¶‹åŠ¿æŒ‡æ ‡ (EMA)
        df['ema_fast'] = df['close'].ewm(span=self.params['ema_fast'], adjust=False).mean()
        df['ema_slow'] = df['close'].ewm(span=self.params['ema_slow'], adjust=False).mean()
        
        # 2. åŠ¨é‡æŒ‡æ ‡ (RSI)
        delta = df['close'].diff()
        gain = (delta.where(delta > 0, 0)).rolling(window=self.params['rsi_period']).mean()
        loss = (-delta.where(delta < 0, 0)).rolling(window=self.params['rsi_period']).mean()
        rs = gain / loss
        df['rsi'] = 100 - (100 / (1 + rs))
        
        # 3. å·¨é²¸ä¾¦æµ‹ (Volume Analysis)
        df['vol_ma'] = df['volume'].rolling(window=self.params['vol_ma_window']).mean()
        df['vol_spike'] = df['volume'] > (df['vol_ma'] * self.params['whale_factor'])
        
        # 4. é£Žé™©æŽ§åˆ¶ (ATR)
        high_low = df['high'] - df['low']
        high_close = np.abs(df['high'] - df['close'].shift())
        low_close = np.abs(df['
```python
# Darwin SDK - User Strategy Template
# ğŸ§  DEVELOPERS: EDIT THIS FILE ONLY!

import random
import math
from collections import deque
from typing import Dict, List, Optional

class MyStrategy:
    """
    Agent: Value_Investor_113 (Gen 3: Phoenix Ascension)
    
    è¿›åŒ–æ—¥å¿— (Evolution Log):
    1. èŒƒå¼è½¬ç§»: ä» "ä»·å€¼æŠ•èµ„(Value)" è½¬å‘ "åŠ¨é‡ç”Ÿå­˜(Momentum Survival)"ã€‚
       åœ¨ Darwin è¿™ç§é«˜æ³¢åŠ¨ç¯å¢ƒä¸­ï¼Œé•¿æœŸæŒæœ‰æ˜¯è‡ªæ€è¡Œä¸ºã€‚
    2. åŠ¨æ€é£æ§ (Dynamic Risk): å¼•å…¥æ³¢åŠ¨ç‡è‡ªé€‚åº”æ­¢æŸã€‚
       æ³¢åŠ¨è¶Šå¤§ï¼Œæ­¢æŸè¶Šå®½ä½†ä»“ä½è¶Šå°ï¼›æ³¢åŠ¨è¶Šå°ï¼Œæ­¢æŸè¶Šç´§ã€‚
    3. èœ‚å·¢æ„è¯† (Hive Mind): ä¸¥æ ¼éµå®ˆ Penalize ä¿¡å·ï¼Œç«‹å³æ¸…ä»“è¢«æƒ©ç½šçš„èµ„äº§ã€‚
    4. ç¬æ—¶ååº”: æŠ›å¼ƒæ»åçš„ EMA/RSIï¼Œæ”¹ç”¨åŸºäº Tick çš„å¾®è§‚ç»“æ„åˆ†æ (Micro-structure Analysis)ã€‚
    """

    def __init__(self):
        print("ğŸ§  Strategy Initialized (Gen 3: Phoenix)")
        
        # === æ ¸å¿ƒé…ç½® ===
        self.history_window = 15      # åªéœ€è¦æœ€è¿‘15ä¸ªtickçš„æ•°æ®
        self.min_volatility = 0.001   # å¿½ç•¥æ­»é±¼è‚¡
        self.max_volatility = 0.08    # å¿½ç•¥å‰§çƒˆæ³¢åŠ¨çš„å¦–è‚¡(é˜²æ­¢æ»‘ç‚¹)
        
        # === èµ„é‡‘ç®¡ç† ===
        self.balance = 536.69         # å½“å‰ä½™é¢ (æ¨¡æ‹Ÿ)
        self.base_bet_size = 0.15     # æ¯æ¬¡æŠ•å…¥æ€»èµ„é‡‘çš„ 15%
        self.max_positions = 4        # æœ€å¤§åŒæ—¶æŒä»“æ•°
        
        # === å†…éƒ¨çŠ¶æ€ ===
        self.prices_history: Dict[str, deque] = {} 
        self.positions: Dict[str, dict] = {} # symbol -> {entry: float, high: float, amount: float}
        self.banned_tags = set()
        
    def on_hive_signal(self, signal: dict):
        """æ¥æ”¶ Hive Mind ä¿¡å·ï¼Œä¼˜å…ˆå¤„ç†é£æ§"""
        penalize = signal.get("penalize", [])
        if penalize:
            print(f"âš ï¸ HIVE ALERT: Penalizing {penalize}")
            self.banned_tags.update(penalize)
            # é€»è¾‘ï¼šå¦‚æœæŒä»“ä¸­æœ‰è¢« Ban çš„æ ‡ç­¾/å¸ç§ï¼Œå°†åœ¨ä¸‹ä¸€æ¬¡ update å¼ºåˆ¶æ¸…ä»“
            
        boost = signal.get("boost", [])
        if boost:
            # å¯ä»¥åœ¨æ­¤å¤„å¢åŠ  boost èµ„äº§çš„æƒé‡ï¼Œæš‚æ—¶å…ˆä»é»‘åå•ç§»é™¤
            self.banned_tags.difference_update(boost)

    def _calculate_volatility(self, prices: list) -> float:
        """è®¡ç®—çŸ­æœŸæ³¢åŠ¨ç‡ (æ ‡å‡†å·®/å‡å€¼)"""
        if len(prices) < 2: return 0.0
        mean_p = sum(prices) / len(prices)
        variance = sum((p - mean_p) ** 2 for p in prices) / len(prices)
        return math.sqrt(variance) / mean_p

    def on_price_update(self, prices: dict) -> List[dict]:
        """
        æ ¸å¿ƒäº¤æ˜“å¾ªç¯ (çº¦æ¯3ç§’è§¦å‘ä¸€æ¬¡)
        """
        orders = []
        
        # 1. æ›´æ–°æ•°æ®ä¸çŠ¶æ€ç»´æŠ¤
        for symbol, data in prices.items():
            current_price = data["priceUsd"]
            
            # åˆå§‹åŒ–å†å²è®°å½•
            if symbol not in self.prices_history:
                self.prices_history[symbol] = deque(maxlen=self.history_window)
            self.prices_history[symbol].append(current_price)

        # 2. éå†æŒä»“è¿›è¡Œé£æ§ (Sell Logic)
        active_symbols = list(self.positions.keys())
        for symbol in active_symbols:
            if symbol not in prices: continue
            